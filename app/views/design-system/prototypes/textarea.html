{% extends "design-system-page-layout-guide.html" %}

{% set section_id = "prototypes" %} <!-- Section id var for main nav --> 
{% set page_id = "textarea" %} <!-- Page id var for side nav --> 
{% set page_title = "Textarea" %} <!-- Page title var for page header (H1) and page title -->    

{% block sectionOneTop %}{% endblock %}

{% block sectionLeftHandColumn %}
    <!-- Side nav include -->  
    {% include "includes/design-system/design-system-side-nav.html" %}
{% endblock %}

{% block sectionOneRightContent %}
<div class="page-header-section">
    <h1>{{ page_title }}</h1>
</div>
<div class="contents-box">
    <h2 class="heading-contents">Contents</h2>
    <ul class="list list-contents">
        <li><a href="#characterlimits">Character limits</a></li>
        <li><a href="#errorhandling">Error handling</a></li>
    </ul>
</div>

<h2 class="heading-large" id="characterlimits">Character limits</h2>
<div class="example">
    <span class="example-title">Example</span>

    <form>
        <div class="form-group">
            <label class="form-label form-label-bold" for="AdditionalInfo">
                Do you know anything about the person(s) responsible for the issue? (optional)
                <span class="form-hint">500 character limit</span>
            </label>
            <textarea class="form-control form-control--limited" cols="20" data-val="true" id="AdditionalInfo" name="AdditionalInfo" rows="5" maxlength="500" aria-describedby="label--charactersremaining"></textarea>
            <span id="label--charactersremaining" class="form-hint form-hint__remaining" aria-live="polite">You have 500 characters remaining</span>
        </div>
    </form>
</div>

<div class="code-snippet">
    <h3 class="heading-mark-up">HTML Snippet <span class="sr-only">for textarea character limit</span></h3>
    <pre>
        <code id="snippet-textarea" class="line-numbers language-markup">
            &lt;form>
                &lt;div class="form-group">
                    &lt;label class="form-label form-label-bold" for="AdditionalInfo">
                        Do you know anything about the person(s) responsible for the issue? (optional)
                        &lt;span class="form-hint">500 character limit&lt;/span>
                    &lt;/label>
                    &lt;textarea class="form-control form-control--limited" cols="20" data-val="true" id="AdditionalInfo" name="AdditionalInfo" rows="5" maxlength="500" aria-describedby="label--charactersremaining">&lt;/textarea>
                    &lt;span id="label--charactersremaining" class="form-hint form-hint__remaining" aria-live="polite">You have 500 characters remaining&lt;/span>
                &lt;/div>
            &lt;/form>
        </code>
    </pre>
</div>

<div class="code-snippet">
    <h3 class="heading-mark-up">JS Snippet <span class="sr-only">for textarea character limit</span></h3>
    <pre>
        <code id="snippet-textarea" class="line-numbers language-markup">
            $('.form-control--limited').each(function() {
                $(this).on("input", function(){
                    var maxlength = $(this).attr("maxlength");
                    var currentLength = $(this).val().length;
                
                    if( currentLength >= maxlength ){
                        $(this).parent().find('.form-hint__remaining').html('You have 0 characters remaining');
                    }else{
                        var remaining = maxlength - currentLength;
                        $(this).parent().find('.form-hint__remaining').html('You have '+remaining+' characters remaining');
                    }
                });
            });
        </code>
    </pre>
</div>

<h2 class="heading-large" id="errorhandling">Error handling</h2>
<div class="example">
    <span class="example-title">Example</span>

    <form>
        <div class="form-group form-group-error">
            <label class="form-label form-label-bold" for="AdditionalInfo">
                Do you know anything about the person(s) responsible for the issue?
                <span class="error-message">Error message goes here</span>
            </label>
            <textarea class="form-control form-control--limited" cols="20" data-val="true" id="AdditionalInfo" name="AdditionalInfo" rows="5" maxlength="500" aria-describedby="label--charactersremaining"></textarea>
            <span id="label--charactersremaining" class="form-hint form-hint__remaining" aria-live="polite">You have 500 characters remaining</span>
        </div>
    </form>
</div>

<div class="code-snippet">
    <h3 class="heading-mark-up">HTML Snippet <span class="sr-only">for textarea character limit</span></h3>
    <pre>
        <code id="snippet-textarea" class="line-numbers language-markup">
            &lt;form>
                &lt;div class="form-group form-group-error">
                    &lt;label class="form-label form-label-bold" for="AdditionalInfo">
                        Do you know anything about the person(s) responsible for the issue?
                        &lt;span class="error-message">Error message goes here&lt;/span>
                    &lt;/label>
                    &lt;textarea class="form-control form-control--limited" cols="20" data-val="true" id="AdditionalInfo" name="AdditionalInfo" rows="5" maxlength="500" aria-describedby="label--charactersremaining">&lt;/textarea>
                    &lt;span id="label--charactersremaining" class="form-hint form-hint__remaining" aria-live="polite">You have 500 characters remaining&lt;/span>
                &lt;/div>
            &lt;/form>
        </code>
    </pre>
</div>

{% endblock %}